#!/usr/bin/env ruby
require 'rubygems'
require 'rubygems/gem_runner'
require 'rubygems/exceptions'
require 'bundler'
Bundler.setup

required_version = Gem::Requirement.new '>= 2.0.0'


require 'docopt'

doc = <<DOCOPT
Wow

Usage:
    #{__FILE__} init
    #{__FILE__} pack [<platform>]
    #{__FILE__} register [options]
    #{__FILE__} extract <filename>
    #{__FILE__} install <package> [options]
    #{__FILE__} uninstall <package>
    #{__FILE__} unpack <file>...
    #{__FILE__} build [<platform>]
    #{__FILE__} push <file>
    #{__FILE__} compile
    #{__FILE__} (-h | --help)
    #{__FILE__} use <package> <version>
Action
Options:
  -h --help                 Show this screen.
  -v --version=<version>    Show version or Set Version for the package
  -s --source=<source>      Set the source for the package. Override the user config
  --add-source=<source>     Add a source to the list of sources.
  -u --username=<username>  Username for remote
  -p --password=<password>  Password for remote
  --prerelease              Authorize to install prerelease
DOCOPT

begin
  $:.push File.expand_path('../../lib', __FILE__)
  require 'wow'
  Wow.run(Docopt::docopt(doc))
rescue Docopt::Exit => e
  puts e.message
rescue Wow::Error => e
  puts e.error_message
end
